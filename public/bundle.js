!function(e){var t={};function a(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(o,r,function(t){return e[t]}.bind(null,r));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";a.r(t);const o={start:document.getElementById("js-start"),pause:document.getElementById("js-pause"),reset:document.getElementById("js-reset"),title:document.getElementById("js-title"),audio:document.getElementById("js-alarm"),alarmTester:document.getElementById("js-sound-tester"),alarmDiv:document.getElementById("js-alarm-container"),timerTitle:document.getElementById("js-timer-title"),timer:document.getElementById("js-timer"),focusTab:document.getElementById("js-focus-tab"),breakTab:document.getElementById("js-break-tab"),longBreakTab:document.getElementById("js-longbreak-tab"),blockBackgound:document.getElementById("js-block-background"),blockIllustration:document.getElementById("js-block-illustration"),settingReset:document.getElementById("js-reset-setting"),settingFocus:document.getElementById("setting-focus"),settingBreak:document.getElementById("setting-break"),settingLongBreak:document.getElementById("setting-longBreak"),settingLoop:document.getElementById("setting-loop"),settingAlarm:document.getElementById("setting-alarms"),settingTitle:document.getElementById("setting-title"),settingNotification:document.getElementById("setting-notification")};var r={resetTime(){!0===state.resetTimer?state.remainingTime=60*localStorage[state.currentTab]:!1===state.resetTimer&&(state.resetTimer=!0)},interval(){state.remainingTime=state.remainingTime-1},clearTimer(){clearInterval(state.timerId)},playAudio(){o.audio.play()},changeAudio(){o.audio.src=`alarms/${o.settingAlarm.value}.mp3`},updateHistory(){"focus"===state.currentTab&&(localStorage.totalPomodoro=parseInt(localStorage.totalPomodoro)+1,localStorage.todayPomodoro=parseInt(localStorage.todayPomodoro)+1)},updateLocalStorage(){o.settingFocus.value<1&&(o.settingFocus.value=1),o.settingFocus.value>60&&(o.settingFocus.value=60),o.settingBreak.value<1&&(o.settingBreak.value=1),o.settingBreak.value>60&&(o.settingBreak.value=60),o.settingLongBreak.value<1&&(o.settingLongBreak.value=1),o.settingLongBreak.value>60&&(o.settingLongBreak.value=60),localStorage.setItem("focus",o.settingFocus.value),localStorage.setItem("break",o.settingBreak.value),localStorage.setItem("longBreak",o.settingLongBreak.value),localStorage.setItem("loop",o.settingLoop.value),localStorage.setItem("alarm",o.settingAlarm.value),console.log(localStorage)},updateOtherSettings(){!0===o.settingTitle.checked?localStorage.setItem("title","on"):!1===o.settingTitle.checked&&localStorage.setItem("title","off"),!0===o.settingNotification.checked?localStorage.setItem("notification","on"):!1===o.settingNotification.checked&&localStorage.setItem("notification","off")},resetSettingStorage(){localStorage.setItem("focus","25"),localStorage.setItem("break","5"),localStorage.setItem("longBreak","30"),localStorage.setItem("loop","4"),localStorage.setItem("alarm","beep-alarm"),localStorage.setItem("title","on"),localStorage.setItem("notification","on")},checkNewDay(){let e=new Date;function t(){localStorage.setItem("todayPomodoro","0")}(e.getFullYear()>localStorage.lastOnlineYear||e.getMonth()>localStorage.lastOnlineMonth||e.getDate()>localStorage.lastOnlineDate&&e.getMonth()==localStorage.lastOnlineMonth)&&t()},updateLastOnline(){let e=new Date;localStorage.setItem("lastOnlineDate",e.getDate()),localStorage.setItem("lastOnlineMonth",e.getMonth()),localStorage.setItem("lastOnlineYear",e.getFullYear())}},n={tabs:{activeTab:["text-gray-800","bg-gray-300","shadow-sm"]},focus:{bgClass:"bg-red-200",illustration:'<img class="my-px pt-px md:p-0 md:m-0" src="https://raw.githubusercontent.com/NLNT/Pomodoro-timer/master/img/focus-illustration.svg?sanitize=true" alt="Woman working illustration">'},break:{bgClass:"bg-teal-200",illustration:'<img class="py-1 -my-px md:my-px md:py-px" src="https://raw.githubusercontent.com/NLNT/Pomodoro-timer/master/img/break-illustration.svg?sanitize=true" alt="Woman mediatating illustration">'},longBreak:{bgClass:"bg-blue-200",illustration:'<img class="my-1 pt-px" src="https://raw.githubusercontent.com/NLNT/Pomodoro-timer/master/img/long-break-illustartion.svg?sanitize=true" alt="two people resting during a trip illustration">'},renderTab(){this.renderBackgroundColor(),this.renderTabStyle(),this.renderIllustration()},renderBackgroundColor(){o.blockBackgound.classList.replace(this[state.previousTab].bgClass,this[state.currentTab].bgClass)},renderTabStyle(){let e,t,a=state.previousTab,r=state.currentTab;"focus"===a?e=o.focusTab:"break"===a?e=o.breakTab:"longBreak"===a&&(e=o.longBreakTab),"focus"===r?t=o.focusTab:"break"===r?t=o.breakTab:"longBreak"===r&&(t=o.longBreakTab),this.tabs.activeTab.forEach(t=>e.classList.remove(t)),this.tabs.activeTab.forEach(e=>t.classList.add(e))},renderIllustration(){let e=this[state.currentTab].illustration;o.blockIllustration.innerHTML=e},renderTimer(){let e;e=localStorage[state.currentTab]<10?"0":"",o.timer.innerHTML=`${e}${localStorage[state.currentTab]}:00`},formatTimer(){let e=Math.floor(state.remainingTime/60),t=state.remainingTime%60;e=e<10?`0${e}`:e,t=t<10?`0${t}`:t,0==state.remainingTime&&(o.timer.innerHTML="00:00"),o.timer.innerHTML=`${e}:${t}`,"on"===localStorage.getItem("title")&&(o.title.innerHTML=`${e}:${t} - Pomodoro Online`)},renderTimerFinished(){let e,t,a=parseInt(localStorage.loop)-parseInt(localStorage.todayPomodoro)%parseInt(localStorage.loop);a===parseInt(localStorage.loop)&&"focus"===state.currentTab?e="Have a long break":"longBreak"===state.currentTab?e="Start working":(t=a>1?"s":"",e=`${a} pomodoro${t} untill long break`),o.timerTitle.innerHTML=e},toggleStartPause(){o.start.classList.add("hidden"),o.pause.classList.remove("hidden")},togglePauseStart(){o.pause.classList.add("hidden"),o.start.classList.remove("hidden")},updateSettingForm(){o.settingFocus.value=localStorage.getItem("focus"),o.settingBreak.value=localStorage.getItem("break"),o.settingLongBreak.value=localStorage.getItem("longBreak"),o.settingLoop.value=localStorage.getItem("loop"),""===localStorage.getItem("alarm")&&localStorage.setItem("alarm","beep-alarm"),o.settingAlarm.value=localStorage.getItem("alarm")},updateOtherSettings(){"on"===localStorage.title?o.settingTitle.checked=!0:o.settingTitle.checked=!1,"on"===localStorage.notification?o.settingNotification.checked=!0:o.settingNotification.checked=!1}};function l(){state.activeTimer=!0,n.toggleStartPause(),o.timerTitle.innerHTML="Pomodoro Timer",r.updateLocalStorage(),r.resetTime(),state.timerId=setInterval(()=>{r.interval(),n.formatTimer(),state.remainingTime<=0&&function(){r.clearTimer(),"on"===localStorage.getItem("notification")&&r.playAudio();r.updateHistory(),n.renderTimerFinished()}()},1e3)}function i(){state.resetTimer=!0,r.clearTimer(),l()}function s(){state.currentTab!==state.newTab&&(state.previousTab=state.currentTab,state.currentTab=state.newTab,n.renderTimer(),n.renderTab(),state.activeTimer&&(i(),n.toggleStartPause()))}window.state={},o.start.addEventListener("click",l),o.pause.addEventListener("click",(function(){state.remainingTime>0&&(n.togglePauseStart(),clearInterval(state.timerId),state.resetTimer=!1)})),o.reset.addEventListener("click",i),o.focusTab.addEventListener("click",()=>{state.newTab="focus",s()}),o.breakTab.addEventListener("click",()=>{state.newTab="break",s()}),o.longBreakTab.addEventListener("click",()=>{state.newTab="longBreak",s()}),o.settingTitle.addEventListener("click",r.updateOtherSettings),o.settingNotification.addEventListener("click",r.updateOtherSettings),o.settingReset.addEventListener("click",(function(){r.resetSettingStorage(),n.updateSettingForm(),n.updateOtherSettings()})),o.settingAlarm.addEventListener("change",()=>{r.changeAudio(),r.updateLocalStorage()}),o.alarmTester.addEventListener("click",r.playAudio),[o.settingFocus,o.settingBreak,o.settingLongBreak].forEach(e=>{e.addEventListener("input",()=>{!1===state.activeTimer&&(r.updateLocalStorage(),n.renderTimer())})}),o.settingLoop.addEventListener("input",r.updateLocalStorage);state.currentTab="focus",state.newTab="",state.previousTab="",state.activeTimer=!1,state.resetTimer=!0,state.remainingTime=0,null===localStorage.getItem("focus")?r.updateLocalStorage():null!==localStorage.getItem("focus")&&n.updateSettingForm(),null===localStorage.getItem("title")&&(localStorage.setItem("title","on"),localStorage.setItem("notification","on")),n.updateOtherSettings(),null===localStorage.getItem("totalPomodoro")&&localStorage.setItem("totalPomodoro","0"),null===localStorage.getItem("todayPomodoro")&&localStorage.setItem("todayPomodoro","0"),r.checkNewDay(),r.updateLastOnline(),n.renderTimer()}]);