!function(t){var e={};function o(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=e,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(a,r,function(e){return t[e]}.bind(null,r));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";o.r(e);const a={start:document.getElementById("js-start"),pause:document.getElementById("js-pause"),reset:document.getElementById("js-reset"),title:document.getElementById("js-title"),audio:document.getElementById("js-alarm"),alarmTester:document.getElementById("js-sound-tester"),alarmDiv:document.getElementById("js-alarm-container"),timerTitle:document.getElementById("js-timer-title"),timer:document.getElementById("js-timer"),focusTab:document.getElementById("js-focus-tab"),breakTab:document.getElementById("js-break-tab"),longBreakTab:document.getElementById("js-longbreak-tab"),blockBackgound:document.getElementById("js-block-background"),blockIllustration:document.getElementById("js-block-illustration"),settingReset:document.getElementById("js-reset-setting"),settingFocus:document.getElementById("setting-focus"),settingBreak:document.getElementById("setting-break"),settingLongBreak:document.getElementById("setting-longBreak"),settingLoop:document.getElementById("setting-loop"),settingAlarm:document.getElementById("setting-alarms"),settingTitle:document.getElementById("setting-title"),settingNotification:document.getElementById("setting-notification"),tabSetting:document.getElementById("js-tab-setting"),tabHistory:document.getElementById("js-tab-history"),contentSetting:document.getElementById("js-content-setting"),contentHistory:document.getElementById("js-content-history"),historyToday:document.getElementById("js-history-today"),historyMonth:document.getElementById("js-history-month"),historyMonthBadge:document.getElementById("js-history-month-badge"),historyTotal:document.getElementById("js-history-total"),weekChart:document.getElementById("js-week-chart").getContext("2d"),dayChart:document.getElementById("js-day-chart").getContext("2d"),historyReset:document.getElementById("js-reset-history")};var r={resetTime(){!0===state.resetTimer?state.remainingTime=60*localStorage[state.currentTab]:!1===state.resetTimer&&(state.resetTimer=!0)},interval(){state.remainingTime=state.remainingTime-1},clearTimer(){clearInterval(state.timerId)},playAudio(){a.audio.play()},changeAudio(){a.audio.src=`alarms/${a.settingAlarm.value}.mp3`},updateLocalStorage(){a.settingFocus.value<1&&(a.settingFocus.value=1),a.settingFocus.value>60&&(a.settingFocus.value=60),a.settingBreak.value<1&&(a.settingBreak.value=1),a.settingBreak.value>60&&(a.settingBreak.value=60),a.settingLongBreak.value<1&&(a.settingLongBreak.value=1),a.settingLongBreak.value>60&&(a.settingLongBreak.value=60),localStorage.setItem("focus",a.settingFocus.value),localStorage.setItem("break",a.settingBreak.value),localStorage.setItem("longBreak",a.settingLongBreak.value),localStorage.setItem("loop",a.settingLoop.value),localStorage.setItem("alarm",a.settingAlarm.value),console.log(localStorage)},updateOtherSettings(){!0===a.settingTitle.checked?localStorage.setItem("title","on"):!1===a.settingTitle.checked&&localStorage.setItem("title","off"),!0===a.settingNotification.checked?localStorage.setItem("notification","on"):!1===a.settingNotification.checked&&localStorage.setItem("notification","off")},resetSettingStorage(){localStorage.setItem("focus","25"),localStorage.setItem("break","5"),localStorage.setItem("longBreak","30"),localStorage.setItem("loop","4"),localStorage.setItem("alarm","beep-alarm"),localStorage.setItem("title","on"),localStorage.setItem("notification","on")},checkNewDay(){let t=new Date;function e(){localStorage.setItem("todayPomodoro","0")}(t.getFullYear()>localStorage.lastOnlineYear||t.getMonth()>localStorage.lastOnlineMonth||t.getDate()>localStorage.lastOnlineDate&&t.getMonth()==localStorage.lastOnlineMonth)&&e()},checkNewMonth(){let t=new Date;function e(){localStorage.setItem("monthPomodoro","0")}(t.getFullYear()>localStorage.lastOnlineYear||t.getMonth()>localStorage.lastOnlineMonth)&&e()},updateHistory(){"focus"===state.currentTab&&(localStorage.totalPomodoro=parseInt(localStorage.totalPomodoro)+1,localStorage.todayPomodoro=parseInt(localStorage.todayPomodoro)+1,localStorage.monthPomodoro=parseInt(localStorage.monthPomodoro)+1,this.updateHistoryWeek(),this.updateHistoryDay())},updateHistoryWeek(){let t=(new Date).getDay(),e=JSON.parse(localStorage.getItem("weekPomodoro"));e[t]=e[t]+1,localStorage.setItem("weekPomodoro",JSON.stringify(e))},updateHistoryDay(){let t=(new Date).getHours(),e=JSON.parse(localStorage.getItem("dayPomodoro"));e[t]=e[t]+1,localStorage.setItem("dayPomodoro",JSON.stringify(e))},updateLastOnline(){let t=new Date;localStorage.setItem("lastOnlineDate",t.getDate()),localStorage.setItem("lastOnlineMonth",t.getMonth()),localStorage.setItem("lastOnlineYear",t.getFullYear())},updateCharts(){weekchart.data.datasets[0].data=JSON.parse(localStorage.getItem("weekPomodoro")),weekchart.update(),daychart.data.datasets[0].data=JSON.parse(localStorage.getItem("dayPomodoro")),daychart.update()},resetHistory(){localStorage.setItem("totalPomodoro","0"),localStorage.setItem("todayPomodoro","0"),localStorage.setItem("monthPomodoro","0"),localStorage.setItem("weekPomodoro","[0, 0, 0, 0, 0, 0, 0]"),localStorage.setItem("dayPomodoro","[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]")}},n={tabs:{activeTab:["text-gray-800","bg-gray-300","shadow-sm"]},focus:{bgClass:"bg-red-200",illustration:'<img class="my-px pt-px md:p-0 md:m-0" src="https://raw.githubusercontent.com/NLNT/Pomodoro-timer/master/img/focus-illustration.svg?sanitize=true" alt="Woman working illustration">'},break:{bgClass:"bg-teal-200",illustration:'<img class="py-1 -my-px md:my-px md:py-px" src="https://raw.githubusercontent.com/NLNT/Pomodoro-timer/master/img/break-illustration.svg?sanitize=true" alt="Woman mediatating illustration">'},longBreak:{bgClass:"bg-blue-200",illustration:'<img class="my-1 pt-px" src="https://raw.githubusercontent.com/NLNT/Pomodoro-timer/master/img/long-break-illustartion.svg?sanitize=true" alt="two people resting during a trip illustration">'},settingHistory:{activeTab:["text-gray-800","bg-gray-300","shadow-sm"]},renderTab(){this.renderBackgroundColor(),this.renderTabStyle(),this.renderIllustration()},renderBackgroundColor(){a.blockBackgound.classList.replace(this[state.previousTab].bgClass,this[state.currentTab].bgClass)},renderTabStyle(){let t,e,o=state.previousTab,r=state.currentTab;"focus"===o?t=a.focusTab:"break"===o?t=a.breakTab:"longBreak"===o&&(t=a.longBreakTab),"focus"===r?e=a.focusTab:"break"===r?e=a.breakTab:"longBreak"===r&&(e=a.longBreakTab),this.tabs.activeTab.forEach(e=>t.classList.remove(e)),this.tabs.activeTab.forEach(t=>e.classList.add(t))},renderIllustration(){let t=this[state.currentTab].illustration;a.blockIllustration.innerHTML=t},renderTimer(){let t;t=localStorage[state.currentTab]<10?"0":"",a.timer.innerHTML=`${t}${localStorage[state.currentTab]}:00`},formatTimer(){let t=Math.floor(state.remainingTime/60),e=state.remainingTime%60;t=t<10?`0${t}`:t,e=e<10?`0${e}`:e,0==state.remainingTime&&(a.timer.innerHTML="00:00"),a.timer.innerHTML=`${t}:${e}`,"on"===localStorage.getItem("title")?a.title.innerHTML=`${t}:${e} - Pomodoro Online Timer`:"off"===localStorage.getItem("title")&&(a.title.innerHTML="Pomodoro Online Timer"),0===state.remainingTime&&(a.title.innerHTML="Times up!")},renderTimerFinished(){let t,e,o=parseInt(localStorage.loop)-parseInt(localStorage.todayPomodoro)%parseInt(localStorage.loop);o===parseInt(localStorage.loop)&&"focus"===state.currentTab?t="Have a long break":"longBreak"===state.currentTab?t="Start working":(e=o>1?"s":"",t=`${o} pomodoro${e} untill long break`),a.timerTitle.innerHTML=t},toggleStartPause(){a.start.classList.add("hidden"),a.pause.classList.remove("hidden")},togglePauseStart(){a.pause.classList.add("hidden"),a.start.classList.remove("hidden")},updateSettingForm(){a.settingFocus.value=localStorage.getItem("focus"),a.settingBreak.value=localStorage.getItem("break"),a.settingLongBreak.value=localStorage.getItem("longBreak"),a.settingLoop.value=localStorage.getItem("loop"),""===localStorage.getItem("alarm")&&localStorage.setItem("alarm","beep-alarm"),a.settingAlarm.value=localStorage.getItem("alarm")},updateOtherSettings(){"on"===localStorage.title?a.settingTitle.checked=!0:a.settingTitle.checked=!1,"on"===localStorage.notification?a.settingNotification.checked=!0:a.settingNotification.checked=!1},updateTabContent(){a.contentSetting.classList.toggle("hidden"),a.contentHistory.classList.toggle("hidden")},updateSecondTabActive(){this.settingHistory.activeTab.forEach(t=>{a.tabSetting.classList.toggle(t),a.tabHistory.classList.toggle(t)})},updateHistoryContent(){this.updateHistoryToday(),this.updateHistoryMonth(),this.updateHistoryTotal()},updateHistoryToday(){a.historyToday.innerHTML=localStorage.getItem("todayPomodoro")},updateHistoryMonth(){a.historyMonth.innerHTML=localStorage.getItem("monthPomodoro");a.historyMonthBadge.innerHTML=`In ${["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(localStorage.getItem("lastOnlineMonth"))]}`},updateHistoryTotal(){a.historyTotal.innerHTML=localStorage.getItem("totalPomodoro")}};function l(){state.activeTimer=!0,n.toggleStartPause(),a.timerTitle.innerHTML="Pomodoro Timer",r.updateLocalStorage(),r.resetTime(),state.timerId=setInterval(()=>{r.interval(),n.formatTimer(),state.remainingTime<=0&&function(){r.clearTimer(),"on"===localStorage.getItem("notification")&&r.playAudio();r.updateHistory(),n.renderTimerFinished(),n.updateHistoryContent(),r.updateCharts()}()},1e3)}function s(){state.resetTimer=!0,r.clearTimer(),l()}function i(){state.currentTab!==state.newTab&&(state.previousTab=state.currentTab,state.currentTab=state.newTab,n.renderTimer(),n.renderTab(),state.activeTimer&&(s(),n.toggleStartPause()))}function g(){state.secondCurTab!==state.secondNewTab&&(state.secondCurTab=state.secondNewTab,n.updateTabContent(),n.updateSecondTabActive())}window.state={},a.start.addEventListener("click",l),a.pause.addEventListener("click",(function(){state.remainingTime>0&&(n.togglePauseStart(),clearInterval(state.timerId),state.resetTimer=!1)})),a.reset.addEventListener("click",s),a.focusTab.addEventListener("click",()=>{state.newTab="focus",i()}),a.breakTab.addEventListener("click",()=>{state.newTab="break",i()}),a.longBreakTab.addEventListener("click",()=>{state.newTab="longBreak",i()}),a.settingTitle.addEventListener("click",r.updateOtherSettings),a.settingNotification.addEventListener("click",r.updateOtherSettings),a.settingReset.addEventListener("click",(function(){r.resetSettingStorage(),n.updateSettingForm(),n.updateOtherSettings()})),a.settingAlarm.addEventListener("change",()=>{r.changeAudio(),r.updateLocalStorage()}),a.alarmTester.addEventListener("click",r.playAudio),[a.settingFocus,a.settingBreak,a.settingLongBreak].forEach(t=>{t.addEventListener("input",()=>{!1===state.activeTimer&&(r.updateLocalStorage(),n.renderTimer())})}),a.settingLoop.addEventListener("input",r.updateLocalStorage),a.tabSetting.addEventListener("click",()=>{state.secondNewTab="setting",g()}),a.tabHistory.addEventListener("click",()=>{state.secondNewTab="history",g()}),window.weekchart=new Chart(a.weekChart,{type:"bar",data:{labels:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],datasets:[{label:"Pomodoros",backgroundColor:"#FEB2B2",borderColor:"#FEB2B2",data:JSON.parse(localStorage.getItem("weekPomodoro"))}]},options:{scales:{xAxes:[{gridLines:{display:!1}}]},legend:{display:!1}}}),window.daychart=new Chart(a.dayChart,{type:"bar",data:{labels:["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],datasets:[{label:"Pomodoros",backgroundColor:"#FEB2B2",borderColor:"#FEB2B2",data:JSON.parse(localStorage.getItem("dayPomodoro"))}]},options:{scales:{xAxes:[{gridLines:{display:!1}}]},legend:{display:!1}}}),a.historyReset.addEventListener("click",(function(){r.resetHistory(),r.updateCharts(),n.updateHistoryContent()}));state.currentTab="focus",state.newTab="",state.previousTab="",state.activeTimer=!1,state.resetTimer=!0,state.remainingTime=0,state.secondCurTab="history",state.secondNewTab="",null===localStorage.getItem("focus")?r.updateLocalStorage():null!==localStorage.getItem("focus")&&n.updateSettingForm(),null===localStorage.getItem("title")&&(localStorage.setItem("title","on"),localStorage.setItem("notification","on")),n.updateOtherSettings(),null===localStorage.getItem("totalPomodoro")&&"NaN"===localStorage.getItem("totalPomodoro")&&localStorage.setItem("totalPomodoro","0"),null===localStorage.getItem("todayPomodoro")&&"NaN"===localStorage.getItem("todayPomodoro")&&localStorage.setItem("todayPomodoro","0"),null===localStorage.getItem("monthPomodoro")&&"NaN"===localStorage.getItem("monthPomodoro")&&localStorage.setItem("monthPomodoro","0"),null===localStorage.getItem("weekPomodoro")&&localStorage.setItem("weekPomodoro","[0, 0, 0, 0, 0, 0, 0]"),null===localStorage.getItem("dayPomodoro")&&localStorage.setItem("dayPomodoro","[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]"),r.checkNewDay(),r.checkNewMonth(),r.updateLastOnline(),n.renderTimer(),n.updateHistoryContent()}]);